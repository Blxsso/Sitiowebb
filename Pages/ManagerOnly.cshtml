@page
@model Sitiowebb.Pages.ManagerOnlyModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize(Roles = "Manager")]
@{
    ViewData["Title"] = "Panel de jefes";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<div class="manager-wrap container-xxl">

    <!-- Botón hamburguesa (móvil) -->
    <button class="menu-toggle d-lg-none" id="menuToggle" aria-label="Abrir menú">
        <span></span><span></span><span></span>
    </button>

    <!-- Sidebar -->
    <aside class="manager-sidebar" id="managerSidebar">
        <div class="p-2 mb-2 small text-white-50 text-uppercase fw-semibold">Menú</div>
        <nav class="menu">
            <a href="#" class="menu-link active" data-target="#pendingView">Solicitudes pendientes</a>
            <a href="#" class="menu-link" data-target="#calendarView">Calendario de empleados</a>
        </nav>
    </aside>

    <!-- Contenido -->
    <main class="manager-content">
        <!-- VISTA: Solicitudes pendientes -->
        <section id="pendingView" class="view visible">
            <h1 class="display-6 mb-4">Solicitudes pendientes</h1>

            <div class="card shadow-sm">
                <div class="table-responsive">
                    <table class="table align-middle mb-0">
                        <thead class="table-light">
                            <tr>
                                <th>Empleado</th>
                                <th>Tipo</th>
                                <th>Desde</th>
                                <th>Hasta</th>
                                <th class="text-end">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Ejemplos/placeholder -->
                            <tr>
                                <td>Sara Morera</td>
                                <td>Vacaciones</td>
                                <td>05/10/2025</td>
                                <td>10/10/2025</td>
                                <td class="text-end">
                                    <button class="btn btn-sm btn-success me-1">Aprobar</button>
                                    <button class="btn btn-sm btn-outline-danger">Rechazar</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Carlos Díaz</td>
                                <td>Reunión</td>
                                <td>12/10/2025</td>
                                <td>12/10/2025</td>
                                <td class="text-end">
                                    <button class="btn btn-sm btn-success me-1">Aprobar</button>
                                    <button class="btn btn-sm btn-outline-danger">Rechazar</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- VISTA: Calendario de empleados (maqueta) -->
        <section id="calendarView" class="view">
            <h1 class="display-6 mb-4">Calendario de empleados</h1>

            <div class="card shadow-sm p-3">
                <div class="calendar-grid mb-2">
                    <!-- Cabecera de la semana -->
                    <div class="cal-header">Lun</div>
                    <div class="cal-header">Mar</div>
                    <div class="cal-header">Mié</div>
                    <div class="cal-header">Jue</div>
                    <div class="cal-header">Vie</div>
                    <div class="cal-header">Sáb</div>
                    <div class="cal-header">Dom</div>

                    @* 5 filas de ejemplo (35 celdas vacías) *@
                    @for (var i = 0; i < 35; i++)
                    {
                        <div class="cal-cell"></div>
                    }
                </div>
                <small class="text-muted">*Maqueta de calendario. Luego podemos poblarlo con datos reales.</small>
            </div>
        </section>
    </main>
</div>

@section Scripts {
<script>
(() => {
  const links = document.querySelectorAll('.menu-link');
  const views = document.querySelectorAll('.view');
  const sidebar = document.getElementById('managerSidebar');
  const toggle = document.getElementById('menuToggle');

  links.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();
      links.forEach(a => a.classList.remove('active'));
      link.classList.add('active');

      const target = document.querySelector(link.dataset.target);
      views.forEach(v => v.classList.remove('visible'));
      if (target) target.classList.add('visible');

      // cerrar el sidebar en móvil
      if (window.innerWidth < 992) sidebar.classList.remove('open');
    });
  });

  if (toggle) {
    toggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });
  }
})();
</script>
}
